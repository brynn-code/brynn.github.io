
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Initialize and test a flow &#8212; Prompt flow  documentation</title>
  <script>
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1e1de1a1873e13ef5536" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1e1de1a1873e13ef5536" rel="stylesheet">

  
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/6.1.2/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1e1de1a1873e13ef5536">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/design-tabs.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'how-to-guides/init-and-test-a-flow';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://raw.githubusercontent.com/brynn-code/brynn.github.io/main/switcher.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = 'Python';
        </script>
    <script src="../_static/custom.js"></script>
    <link rel="shortcut icon" href="../_static/logo32.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Add conditional control to a flow" href="add-conditional-control-to-a-flow.html" />
    <link rel="prev" title="Develop evaluation flow" href="develop-a-flow/develop-evaluation-flow.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="light">

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">

  
  
  
  
  
  
  

  
    <img src="../_static/logo.svg" class="logo__image only-light" alt="Prompt flow">
    <img src="../_static/logo.svg" class="logo__image only-dark" alt="Prompt flow">
  
  
    <p class="title logo__title">Prompt flow</p>
  
</a>
    
  </div>

  
  <div class=" navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <div class="version-switcher__container dropdown">
    <button type="button" class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle" data-toggle="dropdown">
        Python  <!-- this text may get changed later by javascript -->
        <span class="caret"></span>
    </button>
    <div class="version-switcher__menu dropdown-menu list-group-flush py-0">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
</div>
      </div>
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                <li class="nav-item">
                    <a class="nav-link" href="quick-start.html">
                        Quick Start
                    </a>
                </li>
                

                <li class="nav-item current active">
                    <a class="nav-link" href="index.html">
                        How-to Guides
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../tutorials/index.html">
                        Tutorials
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../concepts/index.html">
                        Concepts
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../reference/index.html">
                        Reference
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../cloud/index.html">
                        Cloud
                    </a>
                </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                <li class="nav-item">
                    <a class="nav-link" href="../integrations/index.html">
                        Integrations
                    </a>
                </li>
                
                </div>
            </div>
            
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      <div class="navbar-end-item navbar-end__search-button-container">
        
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
      </div>
      
      <div class="navbar-end-item">
        <span class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" data-toggle="tooltip">
    <a class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="fa-regular fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/microsoft/promptflow" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/promptflow/" title="PyPI" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-solid fa-box"></i></span>
            <label class="sr-only">PyPI</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>


  
  <div class="search-button-container--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
  </div>

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <div class="version-switcher__container dropdown">
    <button type="button" class="version-switcher__button btn btn-sm navbar-btn dropdown-toggle" data-toggle="dropdown">
        Python  <!-- this text may get changed later by javascript -->
        <span class="caret"></span>
    </button>
    <div class="version-switcher__menu dropdown-menu list-group-flush py-0">
    <!-- dropdown will be populated by javascript on page load -->
    </div>
</div>
      </div>
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                <li class="nav-item">
                    <a class="nav-link" href="quick-start.html">
                        Quick Start
                    </a>
                </li>
                

                <li class="nav-item current active">
                    <a class="nav-link" href="index.html">
                        How-to Guides
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../tutorials/index.html">
                        Tutorials
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../concepts/index.html">
                        Concepts
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../reference/index.html">
                        Reference
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="../cloud/index.html">
                        Cloud
                    </a>
                </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                <li class="nav-item">
                    <a class="nav-link" href="../integrations/index.html">
                        Integrations
                    </a>
                </li>
                
                </div>
            </div>
            
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <span class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" data-toggle="tooltip">
    <a class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="fa-regular fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/microsoft/promptflow" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/promptflow/" title="PyPI" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-solid fa-box"></i></span>
            <label class="sr-only">PyPI</label></a>
        </li>
      </ul>
      </div>
      
    </div>
    
  </div>

  
  <div class="sidebar-start-items sidebar-primary__section">
    <div class="sidebar-start-items__item"><nav class="bd-links" id="bd-docs-nav" aria-label="Section navigation">
  <p class="bd-links__title" role="heading" aria-level="1">
    Section Navigation
  </p>
  <div class="bd-toc-item navbar-nav">
    <ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="develop-a-flow/index.html">Develop a flow</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="develop-a-flow/develop-standard-flow.html">Develop standard flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="develop-a-flow/develop-chat-flow.html">Develop chat flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="develop-a-flow/develop-evaluation-flow.html">Develop evaluation flow</a></li>
</ul>
</li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Initialize and test a flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="add-conditional-control-to-a-flow.html">Add conditional control to a flow</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="run-and-evaluate-a-flow/index.html">Run and evaluate a flow</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="run-and-evaluate-a-flow/use-column-mapping.html">Use column mapping</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tune-prompts-with-variants.html">Tune prompts using variants</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="deploy-a-flow/index.html">Deploy a flow</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="deploy-a-flow/deploy-using-dev-server.html">Deploy a flow using development server</a></li>
<li class="toctree-l2"><a class="reference internal" href="deploy-a-flow/deploy-using-docker.html">Deploy a flow using Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="deploy-a-flow/deploy-using-kubernetes.html">Deploy a flow using Kubernetes</a></li>
<li class="toctree-l2"><a class="reference internal" href="deploy-a-flow/distribute-flow-as-executable-app.html">Distribute flow as executable app</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="enable-streaming-mode.html">Use streaming endpoints deployed from prompt flow</a></li>
<li class="toctree-l1"><a class="reference internal" href="manage-connections.html">Manage connections</a></li>
<li class="toctree-l1"><a class="reference internal" href="manage-runs.html">Manage runs</a></li>
<li class="toctree-l1"><a class="reference internal" href="set-global-configs.html">Set global configs</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="develop-a-tool/index.html">Develop a tool</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="develop-a-tool/create-and-use-tool-package.html">Create and Use Tool Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="develop-a-tool/add-a-tool-icon.html">Adding a Tool Icon</a></li>
<li class="toctree-l2"><a class="reference internal" href="develop-a-tool/add-category-and-tags-for-tool.html">Adding Category and Tags for Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="develop-a-tool/use-file-path-as-tool-input.html">Using File Path as Tool Input</a></li>
<li class="toctree-l2"><a class="reference internal" href="develop-a-tool/customize_an_llm_tool.html">Customizing an LLM Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="develop-a-tool/create-cascading-tool-inputs.html">Creating Cascading Tool Inputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="develop-a-tool/create-your-own-custom-strong-type-connection.html">Create and Use Your Own Custom Strong Type Connection</a></li>
<li class="toctree-l2"><a class="reference internal" href="develop-a-tool/create-dynamic-list-tool-input.html">Creating a Dynamic List Tool Input</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequency asked questions (FAQ)</a></li>
</ul>

  </div>
</nav>
    </div>
  </div>
  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

      </div>
      <main class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            
            <article class="bd-article" role="main">
              
  <section id="initialize-and-test-a-flow">
<h1>Initialize and test a flow<a class="headerlink" href="#initialize-and-test-a-flow" title="Permalink to this heading">#</a></h1>
<div class="admonition-experimental-feature admonition">
<p class="admonition-title">Experimental feature</p>
<p>This is an experimental feature, and may change at any time. Learn <a class="reference internal" href="faq.html#stable-vs-experimental"><span class="std std-doc">more</span></a>.</p>
</div>
<p>From this document, customer can initialize a flow and test it.</p>
<section id="initialize-flow">
<h2>Initialize flow<a class="headerlink" href="#initialize-flow" title="Permalink to this heading">#</a></h2>
<p>Creating a flow folder with code/prompts and yaml definitions of the flow.</p>
<section id="initialize-flow-from-scratch">
<h3>Initialize flow from scratch<a class="headerlink" href="#initialize-flow-from-scratch" title="Permalink to this heading">#</a></h3>
<p>Promptflow can <a class="reference external" href="https://promptflow.azurewebsites.net/concepts/concept-flows.html#flow-types">create three types of flow folder</a>:</p>
<ul class="simple">
<li><p>standard: Basic structure of flow folder.</p></li>
<li><p>chat: Chat flow is designed for conversational application development, building upon the capabilities of standard flow and providing enhanced support for chat inputs/outputs and chat history management.</p></li>
<li><p>evaluation: Evaluation flows are special types of flows that assess how well the outputs of a flow align with specific criteria and goals.</p></li>
</ul>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" data-sync-id="CLI" for="sd-tab-item-0">
CLI</label><div class="sd-tab-content docutils">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a flow</span>
pf<span class="w"> </span>flow<span class="w"> </span>init<span class="w"> </span>--flow<span class="w"> </span>&lt;flow-name&gt;

<span class="c1"># Create a chat flow</span>
pf<span class="w"> </span>flow<span class="w"> </span>init<span class="w"> </span>--flow<span class="w"> </span>&lt;flow-name&gt;<span class="w"> </span>--type<span class="w"> </span>chat
</pre></div>
</div>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" data-sync-id="VS Code Extension" for="sd-tab-item-1">
VS Code Extension</label><div class="sd-tab-content docutils">
<p>Use VS Code explorer pane &gt; directory icon &gt; right click &gt; the “New flow in this directory” action. Follow the popped out dialog to initialize your flow in the target folder.
<img alt="img" src="../_images/vscode_new_flow_1.png" /></p>
<p>Alternatively, you can use the “Create new flow” action on the prompt flow pane &gt; quick access section to create a new flow
<img alt="img" src="../_images/vscode_new_flow_2.png" /></p>
</div>
</div>
<p>Structure of flow folder:</p>
<ul class="simple">
<li><p><strong>flow.dag.yaml</strong>: The flow definition with inputs/outputs, nodes, tools and variants for authoring purpose.</p></li>
<li><p><strong>.promptflow/flow.tools.json</strong>: It contains tools meta referenced in <code class="docutils literal notranslate"><span class="pre">flow.dag.yaml</span></code>.</p></li>
<li><p><strong>Source code files (.py, .jinja2)</strong>: User managed, the code scripts referenced by tools.</p></li>
<li><p><strong>requirements.txt</strong>: Python package dependencies for this flow.</p></li>
</ul>
<p><img alt="init_flow_folder" src="../_images/flow_folder.png" /></p>
</section>
<section id="create-from-existing-code">
<h3>Create from existing code<a class="headerlink" href="#create-from-existing-code" title="Permalink to this heading">#</a></h3>
<p>Promptflow CLI can generate the yaml definitions needed for prompt flow from the existing folder, using the tools script and prompt templates.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a flow in existing folder</span>
pf<span class="w"> </span>flow<span class="w"> </span>init<span class="w"> </span>--flow<span class="w"> </span>&lt;flow-name&gt;<span class="w"> </span>--entry<span class="w"> </span>&lt;entry-file-name&gt;<span class="w"> </span>--function<span class="w"> </span>&lt;tool-function-name&gt;<span class="w"> </span>--prompt-template<span class="w"> </span>&lt;prompt-tempate&gt;
</pre></div>
</div>
<p>Take <a class="reference external" href="https://github.com/microsoft/promptflow/tree/main/examples/flows/standard/customer-intent-extraction">customer-intent-extraction</a> for example, which demonstrating how to convert a langchain code into a prompt flow.</p>
<p><img alt="init_output" src="../_images/flow_init_output.png" /></p>
<p>In this case, promptflow CLI generates <code class="docutils literal notranslate"><span class="pre">flow.dag.json</span></code>, <code class="docutils literal notranslate"><span class="pre">.promptflow/tools.json</span></code>  and <code class="docutils literal notranslate"><span class="pre">extract_intent_tool.py</span></code>, it is a python tool in the flow.</p>
<p><img alt="init_files" src="../_images/flow_init_files.png" /></p>
</section>
</section>
<section id="test-a-flow">
<h2>Test a flow<a class="headerlink" href="#test-a-flow" title="Permalink to this heading">#</a></h2>
<div class="admonition-note admonition">
<p class="admonition-title">Note</p>
<p>Testing flow will NOT create a batch run record, therefore it’s unable to use commands like <code class="docutils literal notranslate"><span class="pre">pf</span> <span class="pre">run</span> <span class="pre">show-details</span></code> to get the run information. If you want to persist the run record, see <a class="reference internal" href="run-and-evaluate-a-flow/index.html"><span class="doc std std-doc">Run and evaluate a flow</span></a></p>
</div>
<p>Promptflow also provides ways to test the initialized flow or flow node. It will help you quickly test your flow.</p>
<section id="visual-editor-on-the-vs-code-for-prompt-flow">
<h3>Visual editor on the VS Code for prompt flow.<a class="headerlink" href="#visual-editor-on-the-vs-code-for-prompt-flow" title="Permalink to this heading">#</a></h3>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-2" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" data-sync-id="VS Code Extension" for="sd-tab-item-2">
VS Code Extension</label><div class="sd-tab-content docutils">
<p>Open the flow.dag.yaml file of your flow. On the top of the yaml editor you can find the “Visual editor” action. Use it to open the Visual editor with GUI support.</p>
<p><img alt="img" src="../_images/vscode_open_visual_editor.png" /></p>
</div>
</div>
</section>
<section id="test-flow">
<h3>Test flow<a class="headerlink" href="#test-flow" title="Permalink to this heading">#</a></h3>
<p>Customer can use CLI or VS Code extension to test the flow.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-3" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" data-sync-id="CLI" for="sd-tab-item-3">
CLI</label><div class="sd-tab-content docutils">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Test flow</span>
pf<span class="w"> </span>flow<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--flow<span class="w"> </span>&lt;flow-name&gt;

<span class="c1"># Test flow with specified variant</span>
pf<span class="w"> </span>flow<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--flow<span class="w"> </span>&lt;flow-name&gt;<span class="w"> </span>--variant<span class="w"> </span><span class="s1">&#39;${&lt;node-name&gt;.&lt;variant-name&gt;}&#39;</span>
</pre></div>
</div>
<p>The log and result of flow test will be displayed in the terminal.</p>
<p><img alt="flow test" src="../_images/flow_test.png" /></p>
<p>Promptflow CLI will generate test logs and outputs in <code class="docutils literal notranslate"><span class="pre">.promptflow</span></code>:</p>
<ul class="simple">
<li><p><strong>flow.detail.json</strong>: Defails info of flow test, include the result of each node.</p></li>
<li><p><strong>flow.log</strong>: The log of flow test.</p></li>
<li><p><strong>flow.output.json</strong>: The result of flow test.</p></li>
</ul>
<p><img alt="flow_output_files" src="../_images/flow_output_files.png" /></p>
</div>
<input id="sd-tab-item-4" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" data-sync-id="SDK" for="sd-tab-item-4">
SDK</label><div class="sd-tab-content docutils">
<p>The return value of <code class="docutils literal notranslate"><span class="pre">test</span></code> function is the flow outputs.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">promptflow</span> <span class="kn">import</span> <span class="n">PFClient</span>

<span class="n">pf_client</span> <span class="o">=</span> <span class="n">PFClient</span><span class="p">()</span>

<span class="c1"># Test flow</span>
<span class="n">inputs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;&lt;flow_input_name&gt;&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;flow_input_value&gt;&quot;</span><span class="p">}</span>  <span class="c1"># The inputs of the flow.</span>
<span class="n">flow_result</span> <span class="o">=</span> <span class="n">pf_client</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="n">flow</span><span class="o">=</span><span class="s2">&quot;&lt;flow_folder_path&gt;&quot;</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Flow outputs: </span><span class="si">{</span><span class="n">flow_result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The log and result of flow test will be displayed in the terminal.</p>
<p><img alt="flow test" src="../_images/flow_test.png" /></p>
<p>Promptflow CLI will generate test logs and outputs in <code class="docutils literal notranslate"><span class="pre">.promptflow</span></code>:</p>
<ul class="simple">
<li><p><strong>flow.detail.json</strong>: Defails info of flow test, include the result of each node.</p></li>
<li><p><strong>flow.log</strong>: The log of flow test.</p></li>
<li><p><strong>flow.output.json</strong>: The result of flow test.</p></li>
</ul>
<p><img alt="flow_output_files" src="../_images/flow_output_files.png" /></p>
</div>
<input id="sd-tab-item-5" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" data-sync-id="VS Code Extension" for="sd-tab-item-5">
VS Code Extension</label><div class="sd-tab-content docutils">
<p>You can use the action either on the default yaml editor or the visual editor to trigger flow test. See the snapshots below:
<img alt="img" src="../_images/vscode_test_flow_yaml.png" />
<img alt="img" src="../_images/vscode_test_flow_visual.png" /></p>
</div>
</div>
</section>
<section id="test-a-single-node-in-the-flow">
<h3>Test a single node in the flow<a class="headerlink" href="#test-a-single-node-in-the-flow" title="Permalink to this heading">#</a></h3>
<p>Customer can test a single python node in the flow. It will use customer provides date or the default value of the node as input. It will only use customer specified node to execute with the input.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-6" name="sd-tab-set-3" type="radio">
</input><label class="sd-tab-label" data-sync-id="CLI" for="sd-tab-item-6">
CLI</label><div class="sd-tab-content docutils">
<p>Customer can execute this command to test the flow.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Test flow node</span>
pf<span class="w"> </span>flow<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--flow<span class="w"> </span>&lt;flow-name&gt;<span class="w"> </span>--node<span class="w"> </span>&lt;node-name&gt;
</pre></div>
</div>
<p>The log and result of flow node test will be displayed in the terminal. And the details of node test will generated to <code class="docutils literal notranslate"><span class="pre">.promptflow/flow-&lt;node-name&gt;.node.detail.json</span></code>.</p>
</div>
<input id="sd-tab-item-7" name="sd-tab-set-3" type="radio">
</input><label class="sd-tab-label" data-sync-id="SDK" for="sd-tab-item-7">
SDK</label><div class="sd-tab-content docutils">
<p>Customer can execute this command to test the flow. The return value of <code class="docutils literal notranslate"><span class="pre">test</span></code> function is the node outputs.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">promptflow</span> <span class="kn">import</span> <span class="n">PFClient</span>

<span class="n">pf_client</span> <span class="o">=</span> <span class="n">PFClient</span><span class="p">()</span>

<span class="c1"># Test not iun the flow</span>
<span class="n">inputs</span> <span class="o">=</span> <span class="p">{</span><span class="o">&lt;</span><span class="n">node_input_name</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">node_input_value</span><span class="o">&gt;</span><span class="p">}</span>  <span class="c1"># The inputs of the node.</span>
<span class="n">node_result</span> <span class="o">=</span> <span class="n">pf_client</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="n">flow</span><span class="o">=&lt;</span><span class="n">flow_folder_path</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">,</span> <span class="n">node</span><span class="o">=&lt;</span><span class="n">node_name</span><span class="o">&gt;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Node outputs: </span><span class="si">{</span><span class="n">node_result</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The log and result of flow node test will be displayed in the terminal. And the details of node test will generated to <code class="docutils literal notranslate"><span class="pre">.promptflow/flow-&lt;node-name&gt;.node.detail.json</span></code>.</p>
</div>
<input id="sd-tab-item-8" name="sd-tab-set-3" type="radio">
</input><label class="sd-tab-label" data-sync-id="VS Code Extension" for="sd-tab-item-8">
VS Code Extension</label><div class="sd-tab-content docutils">
<p>The prompt flow extension provides inline actions in both default yaml editor and visual editor to trigger single node runs.</p>
<p><img alt="img" src="../_images/vscode_single_node_test.png" />
<img alt="img" src="../_images/vscode_single_node_test_visual.png" /></p>
</div>
</div>
</section>
<section id="test-with-interactive-mode">
<h3>Test with interactive mode<a class="headerlink" href="#test-with-interactive-mode" title="Permalink to this heading">#</a></h3>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-9" name="sd-tab-set-4" type="radio">
</input><label class="sd-tab-label" data-sync-id="CLI" for="sd-tab-item-9">
CLI</label><div class="sd-tab-content docutils">
<p>Promptflow CLI provides a way to start an interactive chat session for chat flow. Customer can use below command to start an interactive chat session:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Chat in the flow</span>
pf<span class="w"> </span>flow<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--flow<span class="w"> </span>&lt;flow-name&gt;<span class="w"> </span>--interactive
</pre></div>
</div>
<p>After executing this command, customer can interact with the chat flow in the terminal. Customer can press <strong>Enter</strong> to send the message to chat flow. And customer can quit with <strong>ctrl+C</strong>.
Promptflow CLI will distinguish the output of different roles by color, <span style="color:Green">User input</span>, <span style="color:Gold">Bot output</span>, <span style="color:Blue">Flow script output</span>, <span style="color:Cyan">Node output</span>.</p>
<p>Using this <a class="reference external" href="https://github.com/microsoft/promptflow/tree/main/examples/flows/chat/basic-chat">chat flow</a> to show how to use interactive mode.</p>
<p><img alt="chat" src="../_images/chat.png" /></p>
</div>
<input id="sd-tab-item-10" name="sd-tab-set-4" type="radio">
</input><label class="sd-tab-label" data-sync-id="VS Code Extension" for="sd-tab-item-10">
VS Code Extension</label><div class="sd-tab-content docutils">
<p>If a flow contains chat inputs or chat outputs in the flow interface, there will be a selection when triggering flow test. You can select the interactive mode if you want to.</p>
<p><img alt="img" src="../_images/vscode_interactive_chat.png" />
<img alt="img" src="../_images/vscode_interactive_chat_1.png" /></p>
</div>
</div>
<p>When the <a class="reference external" href="https://promptflow.azurewebsites.net/tools-reference/llm-tool.html">LLM node</a> in the chat flow that is connected to the flow output, Promptflow SDK streams the results of the LLM node.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-11" name="sd-tab-set-5" type="radio">
</input><label class="sd-tab-label" data-sync-id="CLI" for="sd-tab-item-11">
CLI</label><div class="sd-tab-content docutils">
<p>The flow result will be streamed in the terminal as shown below.</p>
<p><img alt="streaming_output" src="../_images/streaming_output.gif" /></p>
</div>
<input id="sd-tab-item-12" name="sd-tab-set-5" type="radio">
</input><label class="sd-tab-label" data-sync-id="SDK" for="sd-tab-item-12">
SDK</label><div class="sd-tab-content docutils">
<p>The LLM node return value of <code class="docutils literal notranslate"><span class="pre">test</span></code> function is a generator, you can consume the result by this way:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">promptflow</span> <span class="kn">import</span> <span class="n">PFClient</span>

<span class="n">pf_client</span> <span class="o">=</span> <span class="n">PFClient</span><span class="p">()</span>

<span class="c1"># Test flow</span>
<span class="n">inputs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;&lt;flow_input_name&gt;&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;flow_input_value&gt;&quot;</span><span class="p">}</span>  <span class="c1"># The inputs of the flow.</span>
<span class="n">flow_result</span> <span class="o">=</span> <span class="n">pf_client</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="n">flow</span><span class="o">=</span><span class="s2">&quot;&lt;flow_folder_path&gt;&quot;</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="n">inputs</span><span class="p">)</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">flow_result</span><span class="p">[</span><span class="s2">&quot;&lt;LLM_node_output_name&gt;&quot;</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="debug-a-single-node-in-the-flow">
<h3>Debug a single node in the flow<a class="headerlink" href="#debug-a-single-node-in-the-flow" title="Permalink to this heading">#</a></h3>
<p>Customer can debug a single python node in VScode by the extension.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-13" name="sd-tab-set-6" type="radio">
</input><label class="sd-tab-label" data-sync-id="VS Code Extension" for="sd-tab-item-13">
VS Code Extension</label><div class="sd-tab-content docutils">
<p>Break points and debugging functionalities for the Python steps in your flow. Just set the break points and use the debug actions on either default yaml editor or visual editor.
<img alt="img" src="../_images/vscode_single_node_debug_yaml.png" />
<img alt="img" src="../_images/vscode_single_node_debug_visual.png" /></p>
</div>
</div>
</section>
</section>
<section id="next-steps">
<h2>Next steps<a class="headerlink" href="#next-steps" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="add-conditional-control-to-a-flow.html"><span class="doc std std-doc">Add conditional control to a flow</span></a></p></li>
</ul>
</section>
</section>


            </article>
            
            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="develop-a-flow/develop-evaluation-flow.html" title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">Develop evaluation flow</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="add-conditional-control-to-a-flow.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">Add conditional control to a flow</p>
  </div>
  <i class="fa-solid fa-angle-right"></i>
  </a>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#initialize-flow">
   Initialize flow
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#initialize-flow-from-scratch">
     Initialize flow from scratch
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#create-from-existing-code">
     Create from existing code
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#test-a-flow">
   Test a flow
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#visual-editor-on-the-vs-code-for-prompt-flow">
     Visual editor on the VS Code for prompt flow.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#test-flow">
     Test flow
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#test-a-single-node-in-the-flow">
     Test a single node in the flow
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#test-with-interactive-mode">
     Test with interactive mode
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#debug-a-single-node-in-the-flow">
     Debug a single node in the flow
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#next-steps">
   Next steps
  </a>
 </li>
</ul>

</nav>
</div>

<div class="toc-item">
  
<div id="searchbox"></div>
</div>

<div class="toc-item">
  

<div class="tocsection editthispage">
    <a href="https://github.com//microsoft/promptflow/edit/main/docs/how-to-guides/init-and-test-a-flow.md">
        <i class="fa-solid fa-pencil"></i> Edit this page
    </a>
</div>

</div>

<div class="toc-item">
  
</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1e1de1a1873e13ef5536"></script>

  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 2023, Microsoft.<br>

</p>

  </div>
  
  <div class="footer-item">
    
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.1.0.<br>
</p>

  </div>
  
</div>
  </footer>
  </body>
</html>